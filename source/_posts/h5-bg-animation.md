---
title: H5背景动效实现方案总结
date: 2021-05-07 20:37:08
tags:
---
## 前言

通常来说，一个元素，动往往比静更能吸引用户眼球。针对于H5页面的背景，炫酷的背景动画特效能定向助力传播和品牌打造。本文将介绍几种常见的H5中背景动效的制作手法。

## 一、GIF

gif图片擅长于制作循环的小动画，使用gif有以下几个条件：

    1. 动画是循环的，首尾相接
    2. 每次循环的时间必须要短，否则gif的资源会很大，影响页面的加载速度

来看一个OPPO开发者大会的例子：https://open.oppomobile.com/odc20/mobile/

<img src="/images/h5-bg-animation/1.gif" width = "300" alt="1" align=center />

后面的背景动效具体代码如下：

<img src="/images/h5-bg-animation/2.png" width = "800" alt="1" align=center />

img中的src指向了一个gif。

这个gif体积大小为1.8M，时长为1s。

可以看到，虽然只有1s的gif，但体积大小已经到了1.8M，针对于H5页面来说已经挺大了。

所以，若不是简短的循环动画，不推荐使用gif方案。并且，在设计动效时，需要与美术同学沟通好，不能让其随意发挥，不然可能最后拿到的gif资源过大，导致该方案行不通。

**关键点：循环，简短，体积小，时间短。**

**优点：实现简单，动画效果细腻**

**缺点：限制较多，资源较大，影响页面性能**

## 二、帧动画

帧动画的设计有如下两种，基本原理是一致的：

1. 通过一张张图片切换实现动画效果。在vue框架中，就可以先加载好图片，然后利用v-show进行图片切换
2. 将逐帧图片放到一张长图中，利用css控制图片展示的位置，来实现动画的效果，这种方案需要设计配合输出一张帧动画长图

#### 1、切换图片实现
<img src="/images/h5-bg-animation/3.gif" width = "300" alt="3" align=center />

以上是商店某次活动的效果gif图，图中闪电效果以及手机转动效果均是利用切换图片来实现的帧动画。文末会附上这次活动项目的代码：vbase.zip。

拿闪电效果举例：

- 素材有以下4张图片

<img src="/images/h5-bg-animation/4.png" width = "100" alt="4" align=center />
<img src="/images/h5-bg-animation/5.png" width = "100" alt="4" align=center />
<img src="/images/h5-bg-animation/6.png" width = "100" alt="4" align=center />
<img src="/images/h5-bg-animation/7.png" width = "100" alt="4" align=center />


- 在页面启动时，可以在页面中创建6个img标签，并将各个图片的地址赋值给各个img的src属性，并且这几个img的display都为none，不展示（也可以展示第一张作为过渡，等所有图片加载出来后再开始执行动画）
- 通过setInterval函数，控制好图片展示的时间以及切换，便可实现动画效果。

#### 2、长图滑动图片实现

<img src="/images/h5-bg-animation/10.png" width = "300" alt="4" align=center />



上图的动画效果是利用一张等间距的动画分解逐帧图片（类似雪碧图），由js脚本模拟编写或是使用css3新属性step()制作而成的。

step()在移动端的兼容性是很好的，但使用比较小众。逐帧动画和GIF动画的差别在于，脚本可以控制逐帧动画的快慢和动作的暂停，而GIF动画无法在后期通过代码进行动画速率及透明度的修改。

以下是CSS代码的实现：

<img src="/images/h5-bg-animation/11.png" width = "500" alt="4" align=center />

通过animation属性控制背景图片展示的位置来实现帧动画效果。



以上两种方案都需要手头有帧动画的逐帧图片，若手上只有设计师给的动画效果视频怎么办？

这里有一个不错的网站推荐给大家：https://www.img2go.com/convert-to-jpg（傻瓜式视频转帧动画图片工具）

**优点：兼容性好，实现难度不高**

**缺点：资源较大影响性能，动画可能不够细腻**



## 三、SVG

<img src="/images/h5-bg-animation/12.gif" width = "300" alt="4" align=center />

上图是SVG实现的一个简单的背景动效，具体的实现难度与动画的复杂程度有关，有兴趣的同学可以进一步研究SVG动画：https://aotu.io/notes/2017/01/22/snapsvg/index.html

SVG动画效果以线条、形状变化为主，需要根据具体的场景来决策是否要使用svg进行实现。

**优点：兼容性好，性能佳**

**缺点：实现复杂**

## 四、video

使用video标签来设置背景的好处就在于：可以直接引入视频，且无需过多的代码设计，简单粗暴。但由于H5端各个浏览器以及平台对video标签的处理不尽相同，且无法自动播放，还有可能被浏览器拦截，所以video标签作为背景在PC端上使用得更多，H5端要使用的话必须要平台支持video标签自动播放。

比如在各个手机端的浏览器中基本上是无法自动播放的，而在应用商店或者某些平台的webView中，是可以设置video自动播放，此时就能使用video标签作为背景，引入一个视频，使用方法也很简单：设置一个video标签，配置一些相应的属性即可。video标签的mdn文档：https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/video

**优点：实现简单**

**缺点：H5上对自动播放的兼容性差，无法自动播放时便无法使用此方法进行实现**





## 总结

上述简单总结阐述了四种背景动效的实现方案，分别是gif、逐帧动画、SVG、video，每种方案都有其相应的优缺点，具体的使用需要根据具体场景去分析。在制作背景动效的过程中作为开发人员有以下几点需要注意：

- 有问题及时与设计师沟通，效果无法实现的时候尝试与设计师探讨B方案，比如换用一种效果，或者以可以实现的效果平缓过渡，保证用户体验的同时不会严重影响视觉效果
- 在设计师出完设计动效之后，必须进行评审，明确通知产品以及设计师哪些效果可以做，哪些效果做起来成本会很高，从项目初期就确定好整体的效果以及实现方案。这样做是为了后续保证项目质量以及不会因为动效实现难而导致延期或者不做
- 具体的动效也需要根据具体的场景进行分析，这就要求开发人员需要有足够的动效设计开发经验，对所需要做的动效心里有个尺度
